<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>cqueue by avoidwork</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">cqueue</h1>
      <h2 class="project-tagline">Channel queue with Promises</h2>
      <a href="https://github.com/avoidwork/cqueue" class="btn">View on GitHub</a>
      <a href="https://github.com/avoidwork/cqueue/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/avoidwork/cqueue/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="cqueue" class="anchor" href="#cqueue" aria-hidden="true"><span class="octicon octicon-link"></span></a>cqueue</h1>

<p>cqueue is a Channel queue for holding a msg/value until it's taken. Promises are used for concurrent operations against the queue.</p>

<p><a href="http://travis-ci.org/avoidwork/cqueue"><img src="https://secure.travis-ci.org/avoidwork/cqueue.png" alt="build status"></a></p>

<h2>
<a id="how-do-i-use-it" class="anchor" href="#how-do-i-use-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I use it?</h2>

<p>Put something in the queue, and then take it at some point in the future. The queue can only hold one value, and the response will indicate what your machine should do, i.e. "continue" or "pause".</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">cqueue</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>cqueue<span class="pl-pds">"</span></span>);
<span class="pl-k">let</span> chan <span class="pl-k">=</span> <span class="pl-en">cqueue</span>();

<span class="pl-k">function</span> <span class="pl-en">handle</span> (<span class="pl-smi">arg</span>) {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(arg[<span class="pl-c1">1</span>] <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">"</span>empty<span class="pl-pds">"</span></span>);
}

<span class="pl-smi">chan</span>.<span class="pl-en">take</span>().<span class="pl-en">then</span>(handle); <span class="pl-c">// "empty"</span>
<span class="pl-smi">chan</span>.<span class="pl-en">put</span>(<span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>);
<span class="pl-smi">chan</span>.<span class="pl-en">take</span>().<span class="pl-en">then</span>(handle); <span class="pl-c">// "hello world"</span></pre></div>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h2>

<h3>
<a id="queue" class="anchor" href="#queue" aria-hidden="true"><span class="octicon octicon-link"></span></a>queue</h3>

<h4>
<a id="property" class="anchor" href="#property" aria-hidden="true"><span class="octicon octicon-link"></span></a>Property</h4>

<p>Array which can hold 1 value</p>

<h3>
<a id="put" class="anchor" href="#put" aria-hidden="true"><span class="octicon octicon-link"></span></a>put</h3>

<h4>
<a id="method" class="anchor" href="#method" aria-hidden="true"><span class="octicon octicon-link"></span></a>Method</h4>

<p>Puts an item into the Channel, and the Promise receives an Array</p>

<pre><code>method put
param  {Mixed} arg Item
return {Object}    Promise
</code></pre>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">chan</span>.<span class="pl-en">put</span>(arg).<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">state</span>) {
    <span class="pl-k">if</span> (state[<span class="pl-c1">0</span>] <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">"</span>continue<span class="pl-pds">"</span></span>) {
        <span class="pl-c">// arg was added to the channel</span>
    } <span class="pl-k">else</span> {
        <span class="pl-c">// arg is not in the channel</span>
    }
});</pre></div>

<h3>
<a id="take" class="anchor" href="#take" aria-hidden="true"><span class="octicon octicon-link"></span></a>take</h3>

<h4>
<a id="method-1" class="anchor" href="#method-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Method</h4>

<p>Takes an item from the Channel, and the Promise receives an Array</p>

<pre><code>method take
return {Object} Promise
</code></pre>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">chan</span>.<span class="pl-en">take</span>().<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">state</span>) {
    <span class="pl-k">if</span> (state[<span class="pl-c1">0</span>] <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">"</span>continue<span class="pl-pds">"</span></span>) {
        <span class="pl-c">// state[1] was taken from the channel</span>
    } <span class="pl-k">else</span> {
        <span class="pl-c">// state[1] is null</span>
    }
});</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright (c) 2015 Jason Mulligan
Licensed under the BSD-3 license.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/avoidwork/cqueue">cqueue</a> is maintained by <a href="https://github.com/avoidwork">avoidwork</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
