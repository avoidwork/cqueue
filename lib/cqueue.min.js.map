{"version":3,"sources":["cqueue.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","deferred","promise","undefined","resolver","rejecter","Promise","resolve","reject","factory","Channel","require","this","queue","value","arg","defer","push","pop","version","exports","module","define","amd","cqueue","window"],"mappings":";;AAAA,YAIA,SAASA,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,cAAe,WAAe,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,OAajiB,SAAWkB,GAGV,QAASC,KACR,GAAIC,GAAUC,OACVC,EAAWD,OACXE,EAAWF,MAOf,OALAD,GAAU,GAAII,SAAQ,SAAUC,EAASC,GACxCJ,EAAWG,EACXF,EAAWG,KAGHD,QAASH,EAAUI,OAAQH,EAAUH,QAASA,GA0CxD,QAASO,KACR,MAAO,IAAIC,SAvDZ,GAAIJ,SAAUN,EAAOM,SAAWK,QAAQ,eAAeL,QAenDI,QAAU,WACb,QAASA,WACR9B,gBAAgBgC,KAAMF,SAEtBE,KAAKC,SAgCN,MA7BA7B,cAAa0B,UACZd,IAAK,MACLkB,MAAO,SAAaC,GACnB,GAAIC,GAAQf,GASZ,OAPKW,MAAKC,MAAMxB,OAIf2B,EAAMT,SAAS,QAAS,QAHxBK,KAAKC,MAAMI,KAAKF,GAChBC,EAAMT,SAAS,WAAY,QAKrBS,EAAMd,WAGdN,IAAK,OACLkB,MAAO,WACN,GAAIE,GAAQf,GAQZ,OANKW,MAAKC,MAAMxB,OAGf2B,EAAMT,SAAS,WAAYK,KAAKC,MAAMK,QAFtCF,EAAMT,SAAS,QAAS,OAKlBS,EAAMd,YAIRQ,UAORD,GAAQU,QAAU,QAGK,mBAAZC,SACVC,OAAOD,QAAUX,EACW,kBAAXa,SAAyBA,OAAOC,IACjDD,OAAO,WACN,MAAOb,KAGRT,EAAOwB,OAASf,GAEG,mBAAXgB,QAAyBA,OAASzB","file":"cqueue.min.js","sourcesContent":["\"use strict\";\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Channel queue with Promises\r\n *\r\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\r\n * @copyright 2015\r\n * @license BSD-3-Clause\r\n * @link http://avoidwork.github.io/cqueue\r\n * @version 1.0.0\r\n */\n(function (global) {\n\tvar Promise = global.Promise || require(\"es6-promise\").Promise;\n\n\tfunction deferred() {\n\t\tvar promise = undefined,\n\t\t    resolver = undefined,\n\t\t    rejecter = undefined;\n\n\t\tpromise = new Promise(function (resolve, reject) {\n\t\t\tresolver = resolve;\n\t\t\trejecter = reject;\n\t\t});\n\n\t\treturn { resolve: resolver, reject: rejecter, promise: promise };\n\t}\n\n\tvar Channel = (function () {\n\t\tfunction Channel() {\n\t\t\t_classCallCheck(this, Channel);\n\n\t\t\tthis.queue = [];\n\t\t}\n\n\t\t_createClass(Channel, [{\n\t\t\tkey: \"put\",\n\t\t\tvalue: function put(arg) {\n\t\t\t\tvar defer = deferred();\n\n\t\t\t\tif (!this.queue.length) {\n\t\t\t\t\tthis.queue.push(arg);\n\t\t\t\t\tdefer.resolve([\"continue\", null]);\n\t\t\t\t} else {\n\t\t\t\t\tdefer.resolve([\"pause\", null]);\n\t\t\t\t}\n\n\t\t\t\treturn defer.promise;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"take\",\n\t\t\tvalue: function take() {\n\t\t\t\tvar defer = deferred();\n\n\t\t\t\tif (!this.queue.length) {\n\t\t\t\t\tdefer.resolve([\"pause\", null]);\n\t\t\t\t} else {\n\t\t\t\t\tdefer.resolve([\"continue\", this.queue.pop()]);\n\t\t\t\t}\n\n\t\t\t\treturn defer.promise;\n\t\t\t}\n\t\t}]);\n\n\t\treturn Channel;\n\t})();\n\n\tfunction factory() {\n\t\treturn new Channel();\n\t}\n\n\tfactory.version = \"1.0.0\";\n\n\t// Node, AMD & window supported\n\tif (typeof exports !== \"undefined\") {\n\t\tmodule.exports = factory;\n\t} else if (typeof define === \"function\" && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn factory;\n\t\t});\n\t} else {\n\t\tglobal.cqueue = factory;\n\t}\n})(typeof window !== \"undefined\" ? window : global);\n"]}